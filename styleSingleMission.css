/* --- Global Body / Page Styles --- */
body {
    background-color: #040027; /* A slightly softer dark background than pure black */
    color: #e0e0e0; /* Light gray for general text for readability */
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; /* A clear, modern font */
    margin: 0;
    padding: 20px;
}

h2 {
    color: #0266a0; /* A bright, distinct blue color for titles */
    font-weight: bold;
    font-size: 2.2em;
    margin-top: 0;
    margin-bottom: 20px; /* Adjusted spacing */
    padding-bottom: 5px;
}

/* --- Main Container for Single Mission Details --- */
.mission-details-container {
    max-width: 1000px; /* Limit the width of the single mission content */
    margin: 30px auto; /* Center the container and add vertical margin */
    padding: 0 20px; /* Padding on the sides */
}

.mission-button-container {
    text-align: center; /* Centers inline-level content (like a button) */
    margin-top: 10px; /* Space above button */
    margin-bottom: 10px; /* Space below button */
}

.support-button {
    padding: 12px 25px; /* Slightly larger button */
    font-size: 1.1em;
    background-color: #007bff;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    transition: background-color 0.3s ease;
    border: 2px solid #5cb8ff; /* Lighter blue border */
    box-shadow: 0 0 8px rgba(0, 123, 255, 0.5); /* Soft glow */
}

.support-button:hover {
    background-color: #0056b3;
    border-color: #3399ff;
    box-shadow: 0 0 12px rgba(0, 123, 255, 0.7);
}

.mission-header-box p {
    margin-bottom: 8px; /* Adjusted for spacing */
    margin-top: 0;
}

/* --- Text Styles within Mission Item --- */
.mission-details-container p {
    color: #e0e0e0; /* Match general text color */
    font-size: 1.05em; /* Slightly larger text */
    margin-bottom: 12px;
    line-height: 1.6;
}

.mission-details-container h4 {
    color: #e0e0e0; /* Match general text color */
    font-size: 1.3em; /* Slightly larger heading for sections */
    margin-top: 30px;
    margin-bottom: 18px;
}

.mission-info-grid {
    display: flex;
    justify-content: center; /* Center content horizontally */
    align-items: flex-start; /* Align items to the top */
    flex-wrap: wrap; /* Allows wrapping on smaller screens */
    gap: 20px; /* Space between the info groups and button */
    margin-bottom: 25px; /* Space below the info grid */
}

.mission-info-left,
.mission-info-right {
    flex-basis: auto; /* Content determines width */
    text-align: center; /* Center text within these divs */
}

.mission-info-left p,
.mission-info-right p {
    font-size: 1.1em; /* Make the info text a bit larger */
    line-height: 1.4;
}

/* --- Images Container (Main Mission - REVERTED TO ORIGINAL) --- */
.mission-images {
    display: flex;
    flex-wrap: wrap; /* Important for responsiveness: images wrap to next line */
    gap: 15px; /* Space between images */
    margin-top: 15px;
    justify-content: center; /* Center the images */
    align-items: flex-start;
    width: 95%; /* Set width to 95% of its parent */
    margin-left: auto; /* Center the container horizontally */
    margin-right: auto; /* Center the container horizontally */
    box-sizing: border-box;
    position: relative;
    z-index: 1;
}

/* --- Individual Image Wrapper (Main Mission - REVERTED TO ORIGINAL) --- */
.mission-image-wrapper {
    flex: 1 1 100%; /* Allow it to grow, shrink, and take up 100% of available space */
    width: auto;
    height: auto;
    max-height: 400px;
    overflow: hidden;
    border: 1px solid #5a5a5a;
    border-radius: 6px;
    background-color: #333;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
    padding-bottom: 10px;
}

.mission-image-wrapper img {
    max-width: 100%;
    max-height: 100%;
    width: 100%; /* Original was 100% */
    height: auto;
    object-fit: contain;
    border-radius: 4px;
}

/* --- Progress Bar Area --- */
.mission-progress-area {
    width: 100%;
    margin-top: 20px;
    margin-bottom: 15px; /* Adjusted spacing */
    position: relative;
    min-height: calc(
        var(--bar-h, 25px) + var(--gap-bar-to-line, 5px) +
            var(--line-h-level1) + /* Use the longest line height */
            var(--text-h-approx) + /* Max text box height */
            10px
    );
    overflow: visible;
}

/* --- Progress Bar Container --- */
.mission-progress-bar-container {
    width: 100%;
    background-color: #3a3a3a;
    border-radius: 5px;
    height: var(--bar-h, 25px); /* Height of the bar itself */
    position: relative;
    top: 0;
    left: 0;
    overflow: visible;
}

.mission-progress-bar-fill {
    height: 100%;
    background-color: #0266a0;
    border-radius: 5px;
    transition: width 0.5s ease-in-out;
    position: absolute;
    top: 0;
    left: 0;
}

.mission-progress-text {
    position: absolute;
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #009f76;
    font-weight: bold;
    font-size: 0.9em;
    z-index: 1;
    text-shadow: 0 0 5px rgba(0, 0, 0, 0.7), 0 0 5px rgba(0, 0, 0, 0.7);
}

/* --- Milestone Marker Base Styles --- */
.milestone-marker {
    position: absolute;
    left: var(--milestone-left);
    transform: translateX(-50%);
    z-index: 3;
    white-space: normal;
    top: calc(var(--bar-h) + var(--gap-bar-to-line));
}

.milestone-line {
    width: 2.39px;
    background-color: #777;
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    height: var(--line-h);
    z-index: 4;
    top: 0;
}

.milestone-name {
    position: absolute;
    font-size: 0.85em; /* Adjusted font size */
    text-align: center;
    z-index: 10;
    text-shadow: none;
    background-color: #1e1e1e;
    border: 1px solid;
    border-radius: 4px;
    padding: 2px 5px; /* Adjusted padding */
    line-height: 1.3; /* Adjusted line height */
    width: clamp(90px, 15vw, 130px); /* Slightly adjusted width clamp */
    left: 50%;
    transform: translateX(-50%);
    white-space: normal;
    top: var(--line-h);
}

.milestone-passed .milestone-line {
    background-color: #15ff00;
}

.milestone-passed .milestone-name {
    border-color: #15ff00;
    color: #15ff00;
}

.milestone-next .milestone-line {
    background-color: #eeff00;
}

.milestone-next .milestone-name {
    border-color: #eeff00;
    color: #eeff00;
}

.milestone-future .milestone-line {
    background-color: #777;
}

.milestone-future .milestone-name {
    border-color: #777;
    color: #ffffff;
}

/* Define some common variables at the root or a suitable parent */
:root {
    --bar-h: 25px; /* Height of the progress bar itself */
    --gap-bar-to-line: 5px; /* Visual gap between the progress bar and the *top* of ALL lines */
    --line-h-level0: 30px; /* Height of the line for level 0 milestones (e.g., M1, M3) */
    --line-h-level1: 60px; /* Height of the line for level 1 milestones (e.g., M2) - make this taller */
    --gap-line-to-text: 0px; /* Line touches the text box directly */
    --text-h-approx: 35px; /* Approximate height of the milestone name box, adjust as needed */
}

/* --- Milestone Level Specific Positioning --- */
.milestone-marker.milestone-level-0 {
    --line-h: var(--line-h-level0);
}

.milestone-marker.milestone-level-1 {
    --line-h: var(--line-h-level1);
}

p {
    color: #ffffff;
}

.label {
    color: #009f76;
    font-weight: bold;
}

.mission-header-box {
    border: 5px solid #0266a0; /* Adjusted border thickness */
    padding: 20px 30px; /* Adjusted padding */
    margin-bottom: 30px; /* Adjusted space below the box */
    border-radius: 16px;
}


/* --- New/Updated Styles for the ENTIRE Clickable Card --- */
/* Parent container for related missions needs position: relative for absolute children */
#related-missions-wrapper {
    position: relative; /* Essential for positioning children absolutely */
    padding: 0; /* Remove padding if it's not desired with absolute children */
    margin: 0; /* Remove margin if not desired */
    min-height: 0; /* Ensures it collapses if no flow content */
    height: 0; /* Collapse wrapper height */
}

/* Related Mission Card Link (with your previous absolute positioning) */
.related-mission-card-link {
    display: block; /* Make the <a> tag behave like a block-level card */
    background-color: #1a1a40; /* Card background color */
    border: 1px solid #0266a0; /* Card border */
    border-radius: 8px; /* Rounded corners */
    padding: 15px; /* Inner padding */
    color: #e0e0e0; /* Text color for content inside the card */
    text-decoration: none; /* Remove underline from the link */
    transition: background-color 0.2s ease-in-out, border-color 0.2s ease-in-out, transform 0.2s ease-in-out; /* Smooth transitions */
    cursor: pointer; /* Indicate it's clickable */

    /* --- ABSOLUTE POSITIONING (as you set it) --- */
    position: absolute;
    top: -3890px; /* Position it far above for now */
    left: 1500px;
    width: 250px; /* Fixed width as previously discussed */
    height: auto; /* Allow height to adjust based on content */
    max-height: 400px;
    margin-bottom: 0;
    z-index: 10;
    box-sizing: border-box;
}

.related-mission-card-link:hover {
    background-color: #2a2a50;
    border-color: #007bff;
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
}

.related-mission-card-link:active {
    background-color: #004085;
    transform: translateY(0);
}

/* Styles for content *inside* the related mission card link */
.related-mission-card-link h4 {
    color: #009f76;
    font-size: 1.1em;
    margin-top: 0;
    margin-bottom: 5px;
}

.related-mission-card-link p {
    font-size: 0.95em;
    line-height: 1.4;
    margin-bottom: 5px;
}

.related-mission-card-link .label {
    color: #009f76;
    font-weight: bold;
}

/* --- NEW STYLES for images within Related Mission Cards ONLY --- */
.related-mission-card-link img { /* Target the img directly within the card link */
    max-width: 100%; /* Ensure image doesn't exceed card width */
    max-height: 150px; /* Set a reasonable max-height for images in related cards */
    width: auto; /* Allow natural width based on aspect ratio */
    height: auto; /* Allow natural height based on aspect ratio */
    object-fit: contain; /* Key: Scale image to fit, preserve aspect ratio, no cropping */
    display: block; /* Remove extra space below image */
    margin: 10px auto; /* Center the image horizontally within the card, add some vertical space */
    border-radius: 4px;
    background-color: #0a0a20; /* A slightly darker background for image placeholder */
    padding: 5px; /* A little internal padding for the image itself */
    box-sizing: border-box; /* Include padding in dimensions */
}


/* --- Responsive Adjustments --- */
@media (max-width: 768px) {
    #related-missions-wrapper {
        display: none !important; /* Hides the entire container including heading and cards */
    }

    body {
        padding: 10px;
    }

    .mission-details-container {
        margin: 20px auto;
        padding: 0 10px;
    }

    h2 {
        font-size: 1.8em;
        margin-bottom: 15px;
    }

    .mission-info-grid {
        flex-direction: column;
        align-items: center;
        gap: 15px;
        margin-bottom: 20px;
    }

    .support-button {
        padding: 10px 20px;
        font-size: 1em;
    }

    .mission-info-left p,
    .mission-info-right p {
        font-size: 1em;
    }

    .milestone-name {
        font-size: 0.75em;
        padding: 2px 4px;
        width: clamp(80px, 20vw, 100px);
    }
}

@media (max-width: 480px) {
    .mission-details-container {
        padding: 0 5px;
    }

    h2 {
        font-size: 1.5em;
        margin-bottom: 10px;
    }

    .mission-header-box {
        padding: 15px 20px;
    }

    .milestone-marker.milestone-level-1 {
        --line-h: 45px; /* Shorter line for very small screens */
    }
}